pub mod benchmarks;

impact_profiling::define_target_enum! {
    Target,
    crate::benchmark::benchmarks,
    vector => {
        unpack_vector3,
        pack_vector3,
        add_vector3_compact,
        add_vector3_uncompact,
        add_vector3_both_compact_as_uncompact,
        add_vector3_one_compact_as_uncompact,
        add_vector3_one_compact_as_uncompact_to_compact,
        add_vector3_both_compact_as_uncompact_to_compact,
        unpack_vector4,
        pack_vector4,
        add_vector4_compact,
        add_vector4_uncompact,
        add_vector4_both_compact_as_uncompact,
        add_vector4_one_compact_as_uncompact,
        add_vector4_one_compact_as_uncompact_to_compact,
        add_vector4_both_compact_as_uncompact_to_compact,
    },
    matrix => {
        unpack_matrix3,
        pack_matrix3,
        mul_matrix3_uncompact,
        mul_matrix3_both_compact_as_uncompact,
        mul_matrix3_one_compact_as_uncompact,
        mul_matrix3_one_compact_as_uncompact_to_compact,
        mul_matrix3_both_compact_as_uncompact_to_compact,
        unpack_matrix4,
        pack_matrix4,
        mul_matrix4_uncompact,
        mul_matrix4_both_compact_as_uncompact,
        mul_matrix4_one_compact_as_uncompact,
        mul_matrix4_one_compact_as_uncompact_to_compact,
        mul_matrix4_both_compact_as_uncompact_to_compact,
    },
    quaternion => {
        unpack_quaternion,
        pack_quaternion,
        mul_quaternion_uncompact,
        mul_quaternion_both_compact_as_uncompact,
        mul_quaternion_one_compact_as_uncompact,
        mul_quaternion_one_compact_as_uncompact_to_compact,
        mul_quaternion_both_compact_as_uncompact_to_compact,
    },
    isometry => {
        unpack_isometry,
        pack_isometry,
        mul_isometry_uncompact,
        mul_isometry_both_compact_as_uncompact,
        mul_isometry_one_compact_as_uncompact,
        mul_isometry_one_compact_as_uncompact_to_compact,
        mul_isometry_both_compact_as_uncompact_to_compact,
    },
    generation => {
        generate_box,
        generate_sphere_union,
        generate_complex_object,
        generate_object_with_multifractal_noise,
        generate_box_with_gradient_noise_voxel_types,
        compile_complex_meta_graph,
        build_complex_atomic_graph,
        generate_object_from_complex_graph,
        update_signed_distances_for_block,
    },
    voxel_object => {
        update_internal_adjacencies_for_all_chunks,
        update_connected_regions_for_all_chunks,
        update_all_chunk_boundary_adjacencies,
        resolve_connected_regions_between_all_chunks,
        compute_all_derived_state,
        initialize_inertial_properties,
        create_mesh,
        modify_voxels_within_sphere,
        split_off_disconnected_region,
        split_off_disconnected_region_with_inertial_property_transfer,
        update_mesh,
        obtain_sphere_voxel_object_contacts,
        obtain_plane_voxel_object_contacts,
        obtain_mutual_voxel_object_contacts,
    },
    model => {
        add_feature_to_dynamic_instance_buffer_from_storage,
        add_feature_to_dynamic_instance_buffer_from_storage_repeatedly,
    },
    constraint => {
        prepare_contacts,
        solve_contact_velocities,
        correct_contact_configurations,
    },
    lookup_table => {
        compute_specular_ggx_reflectance,
        compute_black_body_luminance,
    },
    bvh => {
        build_non_overlapping,
        build_fully_overlapping,
        build_grid_distributed,
        build_varying_size,
        build_stratified_random,
        query_small_aabb,
        query_medium_aabb,
        query_full_aabb,
    },
}

pub fn benchmark(target: Target, duration: f64, delay: f64) {
    impact_profiling::benchmark::benchmark(
        |benchmarker| target.execute(benchmarker),
        duration,
        delay,
    );
}
